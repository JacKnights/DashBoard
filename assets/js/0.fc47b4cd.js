(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(t,a,s){"use strict";s.r(a);var n=s(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"系分大作业数据库相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#系分大作业数据库相关","aria-hidden":"true"}},[t._v("#")]),t._v(" 系分大作业数据库相关")]),s("p",[t._v("标签： 系认同分析与设计")]),s("hr"),s("ul",[s("li",[t._v("7.2 database design")]),s("li",[t._v("7.2.1 用户及权限系统数据库设计")]),s("li",[t._v("7.2.2 点餐系统数据库设计")])]),s("hr"),s("h2",{attrs:{id:"_7-2-1-用户及权限系统数据库设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-1-用户及权限系统数据库设计","aria-hidden":"true"}},[t._v("#")]),t._v(" 7.2.1 用户及权限系统数据库设计")]),s("p",[t._v("创建应用账户ooad，密码ooad")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("create user 'ooad'@'localhost' identified by 'ooad';\n")])]),s("p",[t._v("创建应用数据库restaurant")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("create database restaurant;\n")])]),s("p",[t._v("为应用账号ooad设置对数据库restaurant的所有权限")]),s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("grant all on restaurant.* to 'ooad'@'localhost';\n")])]),s("hr"),s("h2",{attrs:{id:"_7-2-2-点餐系统数据库设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-2-点餐系统数据库设计","aria-hidden":"true"}},[t._v("#")]),t._v(" 7.2.2 点餐系统数据库设计")]),s("p",[t._v("参考的数据库建表图表\n"),s("img",{attrs:{src:"http://static.zybuluo.com/gzm1997/jkxxl2pljvr1axm3ztu94de9/image_1cdcvj1al1qv5hrr16dv1919c2o1m.png",alt:"image_1cdcvj1al1qv5hrr16dv1919c2o1m.png-32.1kB"}})]),s("hr"),s("h2",{attrs:{id:"数据库表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库表","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库表")]),s("blockquote",[s("p",[t._v("数据库初始化使用ORM sqlalchemy，一共4个表")])]),s("ul",[s("li",[t._v("tag标签")]),s("li",[t._v("food菜")]),s("li",[t._v("comment评论")]),s("li",[t._v("reservation订单")])]),s("p",[t._v("创建一个名为model的包来创建数据结构和初始化数据库，包结构为")]),s("ul",[s("li",[t._v("model")]),s("li",[t._v("_"),s("em",[t._v("init")]),t._v("_.py")]),s("li",[t._v("base.py")]),s("li",[t._v("tag.py")]),s("li",[t._v("food.py")]),s("li",[t._v("comment.py")]),s("li",[t._v("reservation.py")]),s("li",[t._v("db_setting.py")]),s("li",[t._v("init_db.py")])]),s("p",[t._v("model包测试文件test_model.py")]),s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" model "),s("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" init_db\n"),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),s("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"__main__"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\tinit_db"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("init_database"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("h2",{attrs:{id:"数据库初始化成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库初始化成功","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库初始化成功\n"),s("img",{attrs:{src:"http://static.zybuluo.com/gzm1997/q3zwvfp5w9ybxknx7773hm49/image_1cdcuqh4iku11qts4201f2q1lch19.png",alt:"image_1cdcuqh4iku11qts4201f2q1lch19.png-67.8kB"}})]),s("p",[t._v("tag标签")]),s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Tag")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("base"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Base"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    __tablename__ "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Tag"')]),t._v("\n    "),s("span",{attrs:{class:"token builtin"}},[t._v("id")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primary_key "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("True")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    description "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("50")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    picture "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("50")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("p",[t._v("food菜")]),s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Food")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("base"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Base"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    __tablename__ "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Food"')]),t._v("\n    "),s("span",{attrs:{class:"token builtin"}},[t._v("id")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primary_key "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("True")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    name "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("50")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" unique "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("True")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nullable "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("False")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    picture "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("50")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    price "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nullable "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("False")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    description "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("50")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    rating "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    amount "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nullable "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("False")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tag_id "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ForeignKey"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'Tag.id'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nullable "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("False")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("p",[t._v("comment评论")]),s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Comment")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("base"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Base"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    __tablename__ "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Comment"')]),t._v("\n    comment_id "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primary_key "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("True")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    content "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token number"}},[t._v("50")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nullable "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("False")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    food_id "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ForeignKey"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'Food.id'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("p",[t._v("reservation订单")]),s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Reservation")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("base"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Base"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    __tablename__ "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Reservation"')]),t._v("\n    reserve_id "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primary_key "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("True")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    reserve_datetime "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DateTime"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" default "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" datetime"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetime"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    pay_datetime "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DateTime"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" default "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" datetime"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetime"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    table_num "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Integer"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nullable "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("False")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    food_list "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Column"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JSON"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])}],!1,null,null,null);a.default=o.exports}}]);