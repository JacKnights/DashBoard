# 用例建模

**范围：** 餐馆扫码点餐应用

**级别：** 用户目标

**主要参与者：** 顾客

**涉众及其关注点：**

- 顾客：希望可以快速浏览菜单找到招牌菜和各种不同菜系；希望便捷、清晰地看到菜品介绍和价格；希望可以迅速点餐而不用排队；希望可以和伙伴一起订菜而不用互相推让菜单；希望有现成套餐可供选择，也可以自己组合套餐；希望可以随时去除已经勾选的菜；希望可以快速了解并享受优惠；希望可以自由选择支付方式、不用排队买单；希望可以自己决定菜品的做法和口味；希望可以中途加菜；希望不会送错菜、漏菜；希望可以按照用餐时的吃菜顺序点餐；希望得到点餐票据，以便核查。
- 厨师：希望可以及时准确地得到顾客订单、具体菜名、口味和做法要求。
- 送餐员：希望可以准确地得到顾客订单、菜品和对应的用餐台号；希望不会送错餐台；希望可以迅速了解不同顾客的付款方式和其他服务要求。
- 经理：希望可以随时随地掌握餐馆工作情况和用餐交易记录，并无需前往餐馆核算。
- 餐馆：希望准确地记录交易，满足顾客要求；希望确保记录了支付授权服务的支付票据。希望能够自动、快速地更新账务和库存信息。

**前置条件：** 网络状况良好，餐馆正常营业

**成功保证：** 存储交易信息，更新账务和库存信息，生成票据，记录支付授权的批准。

**主成功场景（基本流程）：**

1. 顾客入座后，打开微信扫描餐台上的二维码，进入点餐页面。
2. (系统在对应餐台号码的列表上开始一次新的点餐记录。??)
3. 顾客挑选所点菜品，加入购物车。
4. 系统逐条记录所点菜品，并显示菜品的名称、简单介绍、数量和价格。

**顾客重复3～4步，直到点餐结束。**

5. 点餐完毕， 系统显示总价格，用户点击确认菜品信息
6. 确认无误后，提交订单
7. 顾客点击支付选项，系统显示各种支付方式。
8. 顾客挑选喜欢的支付方式进行付款，系统处理支付。
9. 系统记录完整的菜单和交易信息，并将菜单和餐台号等信息传送到厨房以及送餐员的 POS 机中，厨师开始准备菜品，送餐员准备送餐。
10. 系统打印票据。
11. 顾客获取票据并等待用餐。

**扩展（替代流程）**

***a.**系统在任意时刻失败： 需要完全恢复之前顾客已经预定的订单。

1. 重启系统， 确认系统恢复到正常状态
2. 利用之前的记录日志，将系统恢复到崩溃前的状态。

**1a.**当天有正处于折扣状态的菜品

1. 将其置顶显示
2. 醒目标注其原价，折扣价以及折扣力度。 

**1b.**商家有具有吸引力的“招牌菜”

1. 将其置顶显示
2. 备注（分类）为“招牌菜”

**3a.**用户挑选菜品已售完

1. 在前端界面提示用户该菜品已售完

**3b.**用户在挑选时点击该界面上的菜品

1. 显示菜品详细信息，包括菜品大图，菜品详细介绍，口味 etc。

   **1a.**菜品无图片信息

   1. 显示默认一张菜品图片， 或者直接显示暂无图片

   **1b.**菜品暂无相关的详细介绍

   1. 将主界面中的菜品简介显示
   2. 可以给与相关的链接供用户参考

2. 显示菜品的评分以及销量，供用户参考

**4a.**选择的菜品数量大于当前库存数量

1. 数据提交时，后台系统发现错误，返回该错误
2. 前端将返回的错误表达给用户
3. 将购物车中的该菜品数量置为当前库存剩余量

**4b.**用户在选择时删去了某菜品的所有数量（即该菜品选择数量为 0）

1. 在购物车中把该菜品栏目项删去

**4c.**用户在选择时删去了当前购物车中所有菜品

1. 在购物车中删除所有菜品条目
2. 购物车不显示

**4d.**用户在选择了一些商品后误退出了该页面

1. 页面在用户选择时记录选择信息
2. 在用户重新进入时恢复用户之前的选择

**5a.**用户发现点菜错误

1. 重新返回点菜界面，并在购物车中显示之前点过的菜

**6a.**提交订单之后用户希望取消订单

1. 用户提交取消申请，由前端发送数据到后台系统
2. 系统处理，在店家显示界面及时取消显示该订单

**7a.**不同支付方式支付

**7b.**订单提交之后，支付超时

1. 执行取消订单操作
2. 在店家显示页面去除该订单信息。